<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Supabase Health Check</title>
  <style>
    body { font-family: sans-serif; text-align: center; margin-top: 2rem; }
    #status { font-size: 3rem; }
    .ok { color: green; }
    .fail { color: red; }
  </style>
</head>
<body>
  <h1>Supabase Health Check</h1>
  <div id="status" class="fail">● Disconnected</div>

  <script type="module">
    async function check() {
      const url = import.meta.env.VITE_SUPABASE_URL;
      const key = import.meta.env.VITE_SUPABASE_ANON_KEY;
      const statusEl = document.getElementById('status');

      try {
        const res = await fetch(`${url}/rest/v1/assignments?select=id&limit=1`, {
          headers: { apikey: key }
        });
        if (res.ok) {
          statusEl.textContent = '● Connected';
          statusEl.className = 'ok';
        } else {
          statusEl.textContent = `● Disconnected (HTTP ${res.status})`;
        }
      } catch (err) {
        statusEl.textContent = '● Disconnected (Network error)';
      }
    }
    check();
  </script>
</body>
</html>
